# README

This `README` is a Markdown file generated by the R package `transltr` along
with `v1-example.md` by `write_translations()`. You may avoid it by setting
argument `write_readme` equal to `FALSE`. It contains instructions on how to
use `transltr` **translations source files**.

**It only applies to files formatted according to the template's version `1`.**

## What is a translations source file?

A *translations source file* is a plain text Markdown file (most likely)
generated by the R package `transltr` via `write_translations()`. It
contains (source and unparsed) translations and relevant metadata. It can
be viewed as a portable, human-readable serialization of a `Translator` R
object.

It is meant to be easily sharable with non-technical collaborators such as
translators and reviewers. They may iterate on such files by modifying and
expanding existing *blocks*. See below for details.

## How to import a translations source file?

It may be imported back into a R session with function `read_translations()`.

## How is a translations source file structured?

It is divided into two parts: the **header** and the actual **translations**. It
follows the usual syntax of [CommonMark](https://commonmark.org/) with
one exception: it requires a [YAML](https://yaml.org/) header. Since you
typically never write a translations source file from scratch, you may use
such files as starting points.

### Header

The header must always be enclosed by a pair of separators (three consecutive
dashes) located on separate lines. In-line headers are disallowed for better
readability. The inner contents is formatted according to the
[YAML](https://yaml.org/) format.

There are `7` mandatory fields. They are managed by `transltr` and must be
left as is. There is one exception: you may add further entries to
`language_keys`.

| **Field**          | **Type** | **Example**                                           |
| ------------------ | -------- | ----------------------------------------------------- |
| `template_version` | Integer  | `1`                                                   |
| `generated_by`     | String   | `R package transltr 0.0.1`                            |
| `generated_on`     | String   | `August 22, 2024 @ 08:00 UTC`                         |
| `hash_algorithm`   | String   | `blake2b`                                             |
| `hash_length`      | Integer  | `32`                                                  |
| `language_keys`    | Map      | `fr: Fran√ßais`<br/>`language-key: full-language-name` |

You may add further fields to the header. There is no preferred order.

### Blocks

Each source text that must be translated has a corresponding block. A block
is a collection of metadata and translations (possibly in multiple distinct
languages). It is structured as a Markdown section formatted as shown below.

```
# {{ source-text-reproducible-hash }}

| Source script | Start              | End                |
| ------------- | -------------------|------------------- |
| `...`         | `line X, column X` | `line X, column X` |
| `...`         | `line X, column X` | `line X, column X` |

## {{ source-language-key }}

Extracted source text (as is).

## language-key-1

Source text translated in the language identified by language-key-1 above.

## language-key-2

Source text translated in the uniquely identified by language-key-2 above.
```

Spaces before and after titles (`#` and `##`) are discarded.

You may add any number of *language keys* and translations to a block. Blocks
are mutually independent. They are not required to contain translations under
the same language(s).

Follow these two rules when working on a translations source file.

* Never manually modify sections whose title is enclosed by `{{` and `}}`.
  These are managed automatically by `transltr`.
* Never manually add further (new) blocks. They are generated automatically
  from source scripts by `transltr`.
* Always ensure all pairs of language keys and native language names are
  added to the header's `language_keys` field.

## Going further

Additional information is available in the official documentation of the
package. You may submit feedback, ideas, and bugs by creating an
[issue on GitHub](https://github.com/jeanmathieupotvin/transltr/issues/new).
